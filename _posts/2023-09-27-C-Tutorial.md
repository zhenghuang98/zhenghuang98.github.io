---
title: C语言基础
author: Zheng Huang
date: 2023-09-26
category: Jekyll
layout: post
---
本文来源于 [哔哩哔哩@青空の霞光](https://www.bilibili.com/video/BV1Cr4y137os) ，提供的网站已经寄了。
实际采用的版本来自[C语言笔记（来源于互联网） - PaiBook](https://www.paibook.top/C-language/cnote.html)。在此基础上进行了一些增删及注解。

## C程序基本格式


前面我们在创建项目之后自动生成了一个`.c`文件，这个就是我们编写的程序代码文件：

``` C
#include <stdio.h>
    
int main() {
        printf("Hello World!");
          return 0;
    }
``` 

操作系统需要执行我们的程序，但是我们的程序中可能写了很多很多的代码，那么肯定需要知道从哪里开始执行才可以，也就是程序的入口，所以我们需要提供一个入口点，我们的**C语言程序入口点就是`main`函数**（不过现在还没有讲到函数，所以各位就理解为固定模式即可）它的写法是：

``` C
int main() {  //所有的符号一律采用英文的，别用中文
	程序代码...
}
```

注意是`int`后面空格跟上`main()`，我们的程序代码使用花括号`{}`进行囊括（有的人为了方便查阅，会把前半个花括号写在下面）

然后我们看到，如果我们需要打印一段话到控制台，那么就需要使用`printf(内容)`来完成，这其实就是一种**函数调用**，但是现在我们还没有接触到，我们注意到括号里面的内容就是我们要打印到控制台的内容：

``` C
printf("Hello World!");   //注意最后需要添加;来结束这一行，注意是英文的分号，不是中文的！
```

我们要打印的内容需要采用双引号进行囊括，被双引号囊括的这一端话，我们称为字符串，当然我们现在还没有学到，所以各位也是记固定模式就好，当我们需要向控制台打印一段话时，就要用双引号囊括这段话，然后放入`printf`即可。我们会在后续的学习中逐渐认识`printf`函数。

最顶上还有一句：

``` C
#include <stdio.h>
```

这个是**引入系统库为我们提供的函数**，包括`printf`在内，所以我们以后编写一个C语言程序，就按照固定模式：

``` C
#include <stdio.h>

int main() {
	程序代码
}
```

除了程序代码部分我们会进行编写之外，其他的地方采用固定模式就好。

我们在写代码的过程中可以添加一些注释文本，这些文本内容在编译时自动忽略，所以比如我们想边写边记点笔记，就可以添加注释，注释的格式为：

``` C
#include <stdio.h>   //引入标准库头文件

int main() {   //主函数，程序的入口点
	printf("Hello World!");  //向控制台打印字符串
}
```
当然我们也可以添加多行注释：

``` C
#include <stdio.h>

/*
 * 这是由IDE自动生成的测试代码
 * 还是可以的
 */
int main() {
	printf("Hello World!");
	  //最后还有一句 return 0; 但是我们可以不用写，编译器会自动添加，所以后面讲到之后我们再来说说这玩意。
}
```

OK，基本的一些内容就讲解完毕了。

## 基本数据类型


我们的程序离不开数据，比如我们需要保存一个数字或是字母，这时候这些东西就是作为数据进行保存，不过不同的数据他们的类型可能不同，比如1就是一个整数，0.5就是一个小数，A就是一个字符，C语言提供了多种数据类型供我们使用，我们就可以很轻松的使用这些数据了。

不同的数据类型占据的空间也会不同，这里我们需要先提一个概念，就是字、字节是什么？

我们知道，计算机底层实际上只有0和1能够表示，这时如果我们要存储一个数据，比如十进制的3，那么就需要使用2个二进制位来保存，二进制格式为`11`，占用两个位置，再比如我们要表示十进制的15，这时转换为二进制就是`1111`占用四个位置（4个bit位）来保存。一般占用8个bit位表示一个字节（B），2个字节等于1个字，所以一个字表示16个bit位，它们是计量单位。

我们常说的内存大小1G、2G等，实际上就是按照下面的进制进行计算的：

8 bit = 1 B ，1024 B = 1KB，1024 KB = 1 MB，1024 MB = 1GB，1024 GB = 1TB，1024TB = 1PB（基本上是1024一个大进位，但是有些硬盘生产厂商是按照1000来计算的，所以我们买电脑的硬盘容量可能是512G的但是实际容量可能会缩水）

在不同位数的系统下基本数据类型的大小可能会不同，因为现在主流已经是64位系统，本教程统一按照64位系统进行讲解。

### 原码、反码和补码

#### 原码

上面我们说了实际上所有的数字都是使用0和1这样的二进制数来进行表示的，但是这样仅仅只能保存正数，那么负数怎么办呢？

比如现在一共有4个bit位来保存我们的数据，为了表示正负，我们可以让**第一个bit位专门来保存符号**，这样，我们这4个bit位能够表示的数据范围就是：

*   最小：1111 => - (2^2+2^1+2^0) => -7
*   最大：0111 => + (2^2+2^1+2^0) => +7 => 7

虽然原码表示简单，但是原码在做加减法的时候，很麻烦！以4bit位为例：

1+(-1) = 0001 + 1001 = 怎么让计算机去计算？（虽然我们知道该去怎么算，但是计算机不知道，计算机顶多知道1+1需要进位！）

我们得创造一种更好的表示方式！于是我们引入了反码：

#### 反码

正数的反码是其本身  
**负数的反码是在其原码的基础上, 符号位不变，其余各个位取反**  
经过上面的定义，我们再来进行加减法：

1+(-1) = 0001 + 1110 = 1111 => -0 （直接相加，这样就简单多了！）

思考：1111代表-0，0000代表+0，在我们实数的范围内，0有正负之分吗？

0既不是正数也不是负数，那么显然这样的表示依然不够合理！

#### 补码

根据上面的问题，我们引入了最终的解决方案，那就是补码，定义如下：

正数的补码就是其本身 （不变！）  
**负数的补码是在其原码的基础上, 符号位不变, 其余各位取反, 最后+1**. (即在反码的基础上+1)  
其实现在就已经能够想通了，-0其实已经被消除了！我们再来看上面的运算：

1+(-1) = 0001 + 1111 = (1)0000 => +0 （现在无论你怎么算，也不会有-0了！）

所以现在，4bit位能够表示的范围是：-8~+7（**C使用的就是补码**！）

### 整数类型

我们首先来看看整数类型，整数就是不包含小数点的数据，比如`1`，`99`，`666`等数字，整数包含以下几种类型：

*   int - 占用 4 个字节，32个bit位，能够表示 -2,147,483,648 到 2,147,483,647 之间的数字，**默认一般都是使用这种类型**
*   long - 占用 8 个字节，64个bit位。
*   short - 占用2个字节，16个bit位。

### 浮点类型

浮点类一般用于保存小数，不过为啥不叫小数类型而是浮点类型呢？因为我们的一个小数分为整数部分和小数部分，我们需要用一部分的bit位去表示整数部分，而另一部分去表示小数部分，至于**整数部分和小数部分各自占多少并不是固定的，而是浮动决定的**（在计算机组成原理中会深入学习，这里就不多介绍了）

*   **float - 单精度浮点**，占用4个字节，32个bit位。
*   **double - 双精度浮点**，占用8个字节，64个bit位。

### 字符类型

除了保存数字之外，C语言还支持字符类型，我们的每一个字符都可以使用字符类型来保存：

*   char - 占用1个字节（-128~127），可以表示所有的ASCII码字符，每一个数字对应的是编码表中的一个字符：

![image-20220603114358826](https://s2.loli.net/2022/06/17/BoaWb5EHOM7wJVy.jpg "image-20220603114358826")

编码表中包含了所有我们常见的字符，包括运算符号、数字、大小写字母等（注意只有英文相关的，没有中文和其他语言字符，包括中文的标点符号也没有）

某些无法直接显示的字符（比如换行，换行也算一个字符）需要使用**转义字符**来进行表示：

![img](https://s2.loli.net/2022/06/17/fqnzER2AS4YleTG.jpg "img")

有关基本类型的具体使用我们放到下一节进行讲解。

---

## 变量


前面我们了解了C语言中的基本类型，那么我们如何使用呢？这时我们就可以创建不同类型的变量了。

### 变量的使用

变量就像我们在数学中学习的`x`，`y`一样，我们可以直接声明一个变量，并利用这些变量进行基本的运算，声明变量的格式为：

``` C
数据类型 变量名称 = 初始值;    //其中初始值可以不用在定义变量时设定
// = 是赋值操作，可以将等号后面的值赋值给前面的变量，等号后面可以直接写一个数字（常量）、变量名称、算式
```

比如我们现在想要声明一个整数类型的变量：

``` C
int a = 10;   //变量类型为int（常用），变量名称为a，变量的初始值为10

int a = 10, b = 20;   //多个变量可以另起一行编写，也可以像这样用逗号隔开，注意类型必须是一样的
```

其中，变量的名称并不是随便什么都可以的，它有以下规则：

*   不能重复使用其他变量使用过的名字。
*   只能包含英文字母或是下划线、数字，并且严格区分大小写，比如`a`和`A`不算同一个变量。
*   虽然可以包含数字，但是不能以数字开头。
*   不能是关键字（比如我们上面提到的所有基本数据类型，当然还有一些关键字我们会在后面认识）
*   （建议）使用英文单词，不要使用拼音，多个词可以使用驼峰命名法或是通过下划线连接。

初始值可以是一个常量数据（比如直接写10、0.5这样的数字）也可以是其他变量，或是运算表达式的结果，这样会将其他变量的值作为初始值。

我们可以使用变量来做一些基本的运算：

``` C
#include <stdio.h>

int main() {
	int a = 10;  //将10作为a的值
	int b = 20;
	int c = a + b;   //注意变量一定要先声明再使用，这里是计算a + b的结果（算式），并作为c的初始值
}
```

这里使用到了`+`运算符（之后我们还会介绍其他类型的运算符）这个运算符其实就是我们数学中学习的加法运算，会将左右两边的变量值加起来，得到结果，我们可以将运算结果作为其他变量的初始值，还是很好理解的。

但是现在虽然做了运算，我们还不知道运算的具体结果是什么，所以这里我们通过前面认识的`printf`函数来将结果打印到控制台：

``` C
#include <stdio.h>

int main() {
	int a = 10;
	int b = 20;
	int c = a + b;

	printf(c);   //直接打印变量c
}
```

但是我们发现这样似乎运行不出来结果，不对啊，前面你不是说把要打印到控制台的内容写到`printf`中吗，怎么这里不行呢？实际上`printf`是用于格式化打印的，我们来看看如何进行格式化打印，输出我们的变量值：

``` C
printf("c的结果是：%d", );   //使用%d来代表一个整数类型的数据（占位符），在打印时会自动将c的值替换上去
```

我们来看看效果：
